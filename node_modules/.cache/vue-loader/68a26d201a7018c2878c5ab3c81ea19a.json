{"remainingRequest":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/src/views/login/index.vue","mtime":1640424526459},{"path":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/node_modules/cache-loader/dist/cjs.js","mtime":1641628857414},{"path":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/node_modules/babel-loader/lib/index.js","mtime":1641628857287},{"path":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/node_modules/cache-loader/dist/cjs.js","mtime":1641628857414},{"path":"/Users/fairlyxu/Documents/08-workspace/07-web3/bacalab/baca_ic_fe/node_modules/vue-loader/lib/index.js","mtime":1641628914620}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVzZXJMb2dpbiB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAiQC91dGlscy90b2tlbi5qcyI7CmltcG9ydCBzZXR1cCBmcm9tICdAL3V0aWxzL3BvbGthLmpzJwppbXBvcnQgeyBOb3RpZmljYXRpb24gfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgTG9hZGluZyB9IGZyb20gJ2VsZW1lbnQtdWknOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAibG9naW4iLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICBhY2NMaXN0OiBbXSwKICAgICAgICAgICAgc2VsZWN0ZWQ6ICcnLAogICAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgICBsb2RpbmdpbmZvOiAiTG9hZGluZy4uLi4uLiIKICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgY3JlYXRlZCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsgCiAgICAgICAgICAgIHRoaXMuYWNjTGlzdCA9IGF3YWl0IHNldHVwKCkKICAgICAgICAgICAgaWYgKHRoaXMuYWNjTGlzdCA9PSBudWxsIHx8IHRoaXMuYWNjTGlzdC5sZW5ndGggPCAxKSB7IAogICAgICAgICAgICAgICAgdmFyIG1lcyA9ICJhY2NvdW50IGxpc3QgaXMgbnVsbCIKICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQWhhIH4nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoJ2knLCB7IHN0eWxlOiAnY29sb3I6IHRlYWw7Zm9udC13ZWlnaHQ6NzAwJyB9LCBtZXMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ob3B0aW9ucykKICAgICAgICAgICAgfSAKICAgICAgICAgICAgdGhpcy5sb2RpbmdpbmZvID0gIkxvYWRpbmcgYWNjb3VudCBzdWNjZXNzLiIKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdCB3YWxsZXQgZmFpbCIsIGVycm9yKQogICAgICAgICAgICB0aGlzLmxvZGluZ2luZm8gPSAiTG9hZGluZyBhY2NvdW50IGZhaWwuIgogICAgICAgIH0gZmluYWxseSB7IAogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgc2F2ZUFjYygpIHsgCiAgICAgICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OyAKCiAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLmFjY0xpc3QuZmluZCgoaXRlbSkgPT4geyByZXR1cm4gaXRlbS5hZGRyZXNzID09PSB0aGlzLnNlbGVjdGVkIH0pOwogICAgICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICAgICAgICBzZXRUb2tlbigidXNlcm5hbWUiLCBvYmoubWV0YS5uYW1lKQogICAgICAgICAgICAgICAgc2V0VG9rZW4oImJhY2FXYWxsZXQiLCBvYmouYWRkcmVzcykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBtZXMgPSAicGxlYXNlIHNlbGVjdCBvbmUgYWNjb3VudCIKICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQWhhIH4nLAogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoJ2knLCB7IHN0eWxlOiAnY29sb3I6IHRlYWw7Zm9udC13ZWlnaHQ6NzAwJyB9LCBtZXMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ob3B0aW9ucykKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9IAoKICAgICAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHVzZXJMb2dpbih7ICJhZGRyZXNzIjogb2JqLmFkZHJlc3MsIm5hbWUiOm9iai5tZXRhLm5hbWUgfSkKICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEudG9rZW4pIHsKICAgICAgICAgICAgICAgIHNldFRva2VuKCJiYWNhVG9rZW4iLCByZXMuZGF0YS5kYXRhLnRva2VuKQogICAgICAgICAgICAgICAgdmFyIG1lcyA9ICJMb2dpbiBpbiBzZWNjdXNzIgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBaGEgficsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgnaScsIHsgc3R5bGU6ICdjb2xvcjogdGVhbDtmb250LXdlaWdodDo3MDAnIH0sIG1lcykKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ob3B0aW9ucykgCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpCiAgICAgICAgICAgIH0KCgogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n    <div class=\"login\">\n         <div class=\"selec_addr\">\n            <h5>{{lodinginfo}}</h5>\n        </div>\n        <select v-model=\"selected\" class=\"selectbox\">\n            <option disabled value=\"\">please select one account</option>\n            <option v-for=\"item in accList\" v-bind:value=\"item.address\" class=\"selectoption\">\n                {{item.meta.name}}\n            </option>\n        </select>\n        <div class=\"selec_addr\">\n            <h6>your address {{selected}}</h6>\n        </div>\n        <div>\n            <el-button type=\"primary\" @click=\"saveAcc\" class=\"savebutton\">Login In</el-button>\n        </div>\n    </div>\n</template>\n<script>\nimport { userLogin } from \"@/api/login.js\";\nimport { setToken, getToken } from \"@/utils/token.js\";\nimport setup from '@/utils/polka.js'\nimport { Notification } from 'element-ui';\nimport { Loading } from 'element-ui';\nexport default {\n    name: \"login\",\n    data() {\n        return {\n            isLoading: false,\n            accList: [],\n            selected: '',\n            loading: true,\n            lodinginfo: \"Loading......\"\n        }\n    },\n    async created() {\n        try {\n            const h = this.$createElement; \n            this.accList = await setup()\n            if (this.accList == null || this.accList.length < 1) { \n                var mes = \"account list is null\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n                }\n                Notification(options)\n            } \n            this.lodinginfo = \"Loading account success.\"\n        } catch (error) {\n            console.log(\"connect wallet fail\", error)\n            this.lodinginfo = \"Loading account fail.\"\n        } finally { \n            this.isLoading = false\n        }\n    },\n\n    methods: {\n        async saveAcc() { \n            const h = this.$createElement; \n\n            let obj = this.accList.find((item) => { return item.address === this.selected });\n            if (obj) {\n                setToken(\"username\", obj.meta.name)\n                setToken(\"bacaWallet\", obj.address)\n            } else {\n                var mes = \"please select one account\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n                }\n                Notification(options)\n                return\n            } \n\n            let res = await userLogin({ \"address\": obj.address,\"name\":obj.meta.name })\n            if (res.data && res.data.data.token) {\n                setToken(\"bacaToken\", res.data.data.token)\n                var mes = \"Login in seccuss\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n\n                }\n                Notification(options) \n                this.$router.back()\n            }\n\n\n        }\n    }\n}\n</script>\n<style scoped>\n.login {\n    width: 50%;\n    padding: 3em;\n    background-color: #e9e9e9;\n    margin:  auto;\n    margin-top:2em;\n    text-align: center; \n    box-shadow: #d5d4d4 1px 1px 2px 2px;\n}\n\n.selectbox {\n    text-align: center; \n    border: 1px solid #d5d4d4;\n    -moz-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    color: RGBA(102, 102, 102, 0.7);\n    cursor: pointer;\n    outline: none;\n    font-weight: 800;\n    height: 2.5em;\n    width: 80%\n}\n\n.selectoption {\n    text-align: center;\n}\n\n.selec_addr h6 {\n    margin: 1em;\n    color: RGBA(102, 102, 102, 0.7);\n}\n \n\n\n::v-deep {\n    .el-input__inner {\n        background: white !important;\n        border-color: #DBDBDB;\n        color: #767676;\n    }\n}\n</style>"]}]}