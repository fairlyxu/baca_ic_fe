{"remainingRequest":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue","mtime":1639141214000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js","mtime":1638964568000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVzZXJMb2dpbiB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sZ2V0VG9rZW59IGZyb20gIkAvdXRpbHMvdG9rZW4uanMiOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZS9pbmRleC5qcycKaW1wb3J0IHNldHVwIGZyb20gJ0AvdXRpbHMvcG9sa2EuanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxvZ2luIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgYWNjTGlzdDogW10sCiAgICAgIHNlbGVjdGVkOiAnJwogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlKCkgewogICAgdHJ5ewogICAgICBpZihnZXRUb2tlbigiYmFjYVdhbGxldCIpID09IG51bGwgfHwgZ2V0VG9rZW4oImJhY2FXYWxsZXQiKSA9PSAiIil7CiAgICAgIHRoaXMuYWNjTGlzdCA9IGF3YWl0IHNldHVwKCkKICAgICAgaWYodGhpcy5hY2NMaXN0ID09IG51bGwgfHwgdGhpcy5hY2NMaXN0Lmxlbmd0aCA8IDEpewogICAgICAgIGFsZXJ0KCJhY2NvdW50IGxpc3QgaXMgbnVsbCIpCiAgICAgIH0KICAgIH0KCiAgICB9Y2F0Y2goZXJyb3IpewogICAgICBjb25zb2xlLmxvZygiY29ubmVjdCB3YWxsZXQgZmFpbCIsIGVycm9yKQogICAgfWZpbmFsbHl7CgogICAgfQogICAgCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzYXZlQWNjKCkgeyAKICAgICAgbGV0IG9iaiA9IHRoaXMuYWNjTGlzdC5maW5kKChpdGVtKSA9PiB7cmV0dXJuIGl0ZW0uYWRkcmVzcyA9PT0gdGhpcy5zZWxlY3RlZCB9KTsKICAgICAgaWYob2JqKSB7CiAgICAgICAgc2V0VG9rZW4oInVzZXJuYW1lIiwgb2JqLm1ldGEubmFtZSkKICAgICAgICBzZXRUb2tlbigiYWRkcmVzcyIsIG9iai5hZGRyZXNzKQogICAgICB9CiAgICAgIGxldCByZXMgPSBhd2FpdCB1c2VyTG9naW4oeyJ3YWxsZXRfaWQiOiBvYmouYWRkcmVzc30pCiAgICAgIGlmKHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEudG9rZW4pewogICAgICAgIHNldFRva2VuKCJiYWNhVG9rZW4iLCByZXMuZGF0YS5kYXRhLnRva2VuKQogICAgICAgIGFsZXJ0KCJsb2dpbiBzZWNjdXNzIikKICAgICAgfQogICAgCiAgfSAKfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\n  <div class=\"login\">\n  \t <div @click=\"doLogin\">登录</div> \n     <select> --请选择-- </select>\n     <option v-for = \"item in accList\" v-bind:value=\"item.address\">\n     {{item.meta.name}}\n     </option>\n     </select>\n     <span>{{selected}}</span>\n\n     <div><button @click = \"saveAcc\" > save </button></div>\n\n  </div>\n</template>\n\n<script>\nimport { userLogin } from \"@/api/login.js\";\nimport { setToken,getToken} from \"@/utils/token.js\";\nimport store from '@/store/index.js'\nimport setup from '@/utils/polka.js'\n\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      isLoading: false,\n      accList: [],\n      selected: ''\n    }\n  },\n  async create() {\n    try{\n      if(getToken(\"bacaWallet\") == null || getToken(\"bacaWallet\") == \"\"){\n      this.accList = await setup()\n      if(this.accList == null || this.accList.length < 1){\n        alert(\"account list is null\")\n      }\n    }\n\n    }catch(error){\n      console.log(\"connect wallet fail\", error)\n    }finally{\n\n    }\n    \n  },\n  methods: {\n    async saveAcc() { \n      let obj = this.accList.find((item) => {return item.address === this.selected });\n      if(obj) {\n        setToken(\"username\", obj.meta.name)\n        setToken(\"address\", obj.address)\n      }\n      let res = await userLogin({\"wallet_id\": obj.address})\n      if(res.data && res.data.data.token){\n        setToken(\"bacaToken\", res.data.data.token)\n        alert(\"login seccuss\")\n      }\n    \n  } \n}\n}\n</script>\n\n<style scoped>\n \n</style>"]}]}