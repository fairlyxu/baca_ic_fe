{"remainingRequest":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue","mtime":1639144042000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/babel.config.js","mtime":1639051781000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js","mtime":1638964568000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9mYWlybHl4dS9Eb2N1bWVudHMvMDgtd29ya3NwYWNlLzAzLW91dC9kZW5ld3MvYmFjYV9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHVzZXJMb2dpbiB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAiQC91dGlscy90b2tlbi5qcyI7CmltcG9ydCBzZXR1cCBmcm9tICdAL3V0aWxzL3BvbGthLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsb2dpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGFjY0xpc3Q6IFtdLAogICAgICBzZWxlY3RlZDogJycKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CgogICAgICAgICAgICAgIGlmICghKGdldFRva2VuKCJiYWNhV2FsbGV0IikgPT0gbnVsbCB8fCBnZXRUb2tlbigiYmFjYVdhbGxldCIpID09ICIiKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBzZXR1cCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF90aGlzLmFjY0xpc3QgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoX3RoaXMuYWNjTGlzdCA9PSBudWxsIHx8IF90aGlzLmFjY0xpc3QubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgYWxlcnQoImFjY291bnQgbGlzdCBpcyBudWxsIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0IHdhbGxldCBmYWlsIiwgX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTI7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImZpbmFsbHkiKTsKICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDEyKTsKCiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOSwgMTIsIDE2XV0pOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlQWNjOiBmdW5jdGlvbiBzYXZlQWNjKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBvYmosIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgb2JqID0gX3RoaXMyLmFjY0xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hZGRyZXNzID09PSBfdGhpczIuc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAob2JqKSB7CiAgICAgICAgICAgICAgICAgIHNldFRva2VuKCJ1c2VybmFtZSIsIG9iai5tZXRhLm5hbWUpOwogICAgICAgICAgICAgICAgICBzZXRUb2tlbigiYWRkcmVzcyIsIG9iai5hZGRyZXNzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlckxvZ2luKHsKICAgICAgICAgICAgICAgICAgIndhbGxldF9pZCI6IG9iai5hZGRyZXNzCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgc2V0VG9rZW4oImJhY2FUb2tlbiIsIHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICBhbGVydCgibG9naW4gc2VjY3VzcyIpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIuYmFjaygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAeA,SAAA,SAAA,QAAA,gBAAA;AACA,SAAA,QAAA,EAAA,QAAA,QAAA,kBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,OATA,qBASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEA,QAAA,CAAA,YAAA,CAAA,IAAA,IAAA,IAAA,QAAA,CAAA,YAAA,CAAA,IAAA,EAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAGA,KAAA,EAHA;;AAAA;AAGA,cAAA,KAAA,CAAA,OAHA;;AAIA,kBAAA,KAAA,CAAA,OAAA,IAAA,IAAA,IAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,sBAAA,CAAA;AACA;;AANA;AAQA,cAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AARA;AAAA;;AAAA;AAAA;AAAA;AAUA,cAAA,OAAA,CAAA,GAAA,CAAA,qBAAA;;AAVA;AAAA;AAYA,cAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,cAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AAbA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA,GAzBA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AAAA,yBAAA,IAAA,CAAA,OAAA,KAAA,MAAA,CAAA,QAAA;AAAA,iBAAA,CADA;;AAEA,oBAAA,GAAA,EAAA;AACA,kBAAA,QAAA,CAAA,UAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,kBAAA,QAAA,CAAA,SAAA,EAAA,GAAA,CAAA,OAAA,CAAA;AACA;;AALA;AAAA,uBAMA,SAAA,CAAA;AAAA,+BAAA,GAAA,CAAA;AAAA,iBAAA,CANA;;AAAA;AAMA,gBAAA,GANA;;AAOA,oBAAA,GAAA,CAAA,IAAA,IAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,kBAAA,QAAA,CAAA,WAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,kBAAA,KAAA,CAAA,eAAA,CAAA;;AACA,kBAAA,MAAA,CAAA,OAAA,CAAA,IAAA;AACA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAdA;AA3BA,CAAA","sourcesContent":["<template>\n  <div class=\"login\"> \n     <select v-model=\"selected\">\n     <option>--请选择--</option>  \n     <option v-for=\"item in accList\" v-bind:value=\"item.address\">\n        {{item.meta.name}}\n     </option>\n     </select>\n     <span>{{selected}}</span> \n     <div><button @click = \"saveAcc\" > save </button></div>\n\n  </div>\n</template>\n\n<script>\nimport { userLogin } from \"@/api/login.js\";\nimport {setToken,getToken} from \"@/utils/token.js\"; \nimport setup from '@/utils/polka.js'\n\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      isLoading: false,\n      accList: [],\n      selected: ''\n    }\n  },\n async created() { \n   try{\n    if(getToken(\"bacaWallet\") == null || getToken(\"bacaWallet\") == \"\"){\n          this.accList = await setup() \n          if(this.accList == null || this.accList.length < 1){\n            alert(\"account list is null\")\n        }\n      } \n      this.isLoading = false\n    }catch(error){\n      console.log(\"connect wallet fail\", error)\n    }finally{\n      console.log(\"finally\" )\n      this.isLoading = false\n\n    }  \n  },\n \n  methods: {\n    async saveAcc() { \n      let obj = this.accList.find((item) => {return item.address === this.selected });\n      if(obj) {\n        setToken(\"username\", obj.meta.name)\n        setToken(\"address\", obj.address)\n      }\n      let res = await userLogin({\"wallet_id\": obj.address})\n      if(res.data && res.data.data.token){\n        setToken(\"bacaToken\", res.data.data.token)\n        alert(\"login seccuss\")\n        this.$router.back()\n      }\n    \n  } \n}\n}\n</script>\n\n<style scoped>\n \n</style>"],"sourceRoot":"src/views/login"}]}