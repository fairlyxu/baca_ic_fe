{"remainingRequest":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue","mtime":1639493459000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js","mtime":1638964568000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/babel.config.js","mtime":1639051781000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js","mtime":1638964568000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9mYWlybHl4dS9Eb2N1bWVudHMvMDgtd29ya3NwYWNlLzAzLW91dC9kZW5ld3MvYmFjYV9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHVzZXJMb2dpbiB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAiQC91dGlscy90b2tlbi5qcyI7CmltcG9ydCBzZXR1cCBmcm9tICdAL3V0aWxzL3BvbGthLmpzJzsKaW1wb3J0IHsgTm90aWZpY2F0aW9uIH0gZnJvbSAnZWxlbWVudC11aSc7CmltcG9ydCB7IExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXVpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsb2dpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGFjY0xpc3Q6IFtdLAogICAgICBzZWxlY3RlZDogJycsCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIGxvZGluZ2luZm86ICJMb2FkaW5nLi4uLi4uIgogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBoLCBtZXMsIG9wdGlvbnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBoID0gX3RoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIHNldHVwKCk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX3RoaXMuYWNjTGlzdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmIChfdGhpcy5hY2NMaXN0ID09IG51bGwgfHwgX3RoaXMuYWNjTGlzdC5sZW5ndGggPCAxKSB7CiAgICAgICAgICAgICAgICBtZXMgPSAiYWNjb3VudCBsaXN0IGlzIG51bGwiOwogICAgICAgICAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBaGEgficsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoJ2knLCB7CiAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICdjb2xvcjogdGVhbDtmb250LXdlaWdodDo3MDAnCiAgICAgICAgICAgICAgICAgIH0sIG1lcykKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ob3B0aW9ucyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfdGhpcy5sb2RpbmdpbmZvID0gIkxvYWRpbmcgYWNjb3VudCBzdWNjZXNzLiI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImNvbm5lY3Qgd2FsbGV0IGZhaWwiLCBfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgX3RoaXMubG9kaW5naW5mbyA9ICJMb2FkaW5nIGFjY291bnQgZmFpbC4iOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImZpbmFsbHkiKTsKICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuZmluaXNoKDEzKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgOSwgMTMsIDE3XV0pOwogICAgfSkpKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzYXZlQWNjOiBmdW5jdGlvbiBzYXZlQWNjKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBoLCBvYmosIG1lcywgb3B0aW9ucywgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBoID0gX3RoaXMyLiRjcmVhdGVFbGVtZW50OwogICAgICAgICAgICAgICAgb2JqID0gX3RoaXMyLmFjY0xpc3QuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hZGRyZXNzID09PSBfdGhpczIuc2VsZWN0ZWQ7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoIW9iaikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHNldFRva2VuKCJ1c2VybmFtZSIsIG9iai5tZXRhLm5hbWUpOwogICAgICAgICAgICAgICAgc2V0VG9rZW4oImJhY2FXYWxsZXQiLCBvYmouYWRkcmVzcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIG1lcyA9ICJwbGVhc2Ugc2VsZWN0IG9uZSBhY2NvdW50IjsKICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQWhhIH4nLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBoKCdpJywgewogICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnY29sb3I6IHRlYWw7Zm9udC13ZWlnaHQ6NzAwJwogICAgICAgICAgICAgICAgICB9LCBtZXMpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uKG9wdGlvbnMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyTG9naW4oewogICAgICAgICAgICAgICAgICAiYWRkcmVzcyI6IG9iai5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAibmFtZSI6IG9iai5tZXRhLm5hbWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhICYmIHJlcy5kYXRhLmRhdGEudG9rZW4pIHsKICAgICAgICAgICAgICAgICAgc2V0VG9rZW4oImJhY2FUb2tlbiIsIHJlcy5kYXRhLmRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgICBtZXMgPSAiTG9naW4gaW4gc2VjY3VzcyI7CiAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdBaGEgficsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgnaScsIHsKICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnY29sb3I6IHRlYWw7Zm9udC13ZWlnaHQ6NzAwJwogICAgICAgICAgICAgICAgICAgIH0sIG1lcykKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uKG9wdGlvbnMpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIuYmFjaygpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"login\">\n         <div class=\"selec_addr\">\n            <h5>{{lodinginfo}}</h5>\n        </div>\n        <select v-model=\"selected\" class=\"selectbox\">\n            <option disabled value=\"\">please select one account</option>\n            <option v-for=\"item in accList\" v-bind:value=\"item.address\" class=\"selectoption\">\n                {{item.meta.name}}\n            </option>\n        </select>\n        <div class=\"selec_addr\">\n            <h6>your address {{selected}}</h6>\n        </div>\n        <div>\n            <el-button type=\"primary\" @click=\"saveAcc\" class=\"savebutton\">Login In</el-button>\n        </div>\n    </div>\n</template>\n<script>\nimport { userLogin } from \"@/api/login.js\";\nimport { setToken, getToken } from \"@/utils/token.js\";\nimport setup from '@/utils/polka.js'\nimport { Notification } from 'element-ui';\nimport { Loading } from 'element-ui';\nexport default {\n    name: \"login\",\n    data() {\n        return {\n            isLoading: false,\n            accList: [],\n            selected: '',\n            loading: true,\n            lodinginfo: \"Loading......\"\n        }\n    },\n    async created() {\n        try {\n            const h = this.$createElement; \n            this.accList = await setup()\n            if (this.accList == null || this.accList.length < 1) { \n                var mes = \"account list is null\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n                }\n                Notification(options)\n            } \n            this.lodinginfo = \"Loading account success.\"\n        } catch (error) {\n            console.log(\"connect wallet fail\", error)\n            this.lodinginfo = \"Loading account fail.\"\n        } finally {\n            console.log(\"finally\")\n            this.isLoading = false\n        }\n    },\n\n    methods: {\n        async saveAcc() { \n            const h = this.$createElement; \n\n            let obj = this.accList.find((item) => { return item.address === this.selected });\n            if (obj) {\n                setToken(\"username\", obj.meta.name)\n                setToken(\"bacaWallet\", obj.address)\n            } else {\n                var mes = \"please select one account\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n                }\n                Notification(options)\n                return\n            } \n\n            let res = await userLogin({ \"address\": obj.address,\"name\":obj.meta.name })\n            if (res.data && res.data.data.token) {\n                setToken(\"bacaToken\", res.data.data.token)\n                var mes = \"Login in seccuss\"\n                var options = {\n                    title: 'Aha ~',\n                    message: h('i', { style: 'color: teal;font-weight:700' }, mes)\n\n                }\n                Notification(options) \n                this.$router.back()\n            }\n\n\n        }\n    }\n}\n</script>\n<style scoped>\n.login {\n    width: 50%;\n    padding: 3em;\n    background-color: #e9e9e9;\n    margin:  auto;\n    margin-top:2em;\n    text-align: center; \n    box-shadow: #d5d4d4 1px 1px 2px 2px;\n}\n\n.selectbox {\n    text-align: center;\n\n    border: 1px solid #d5d4d4;\n    -moz-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    border-radius: 6px;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    color: RGBA(102, 102, 102, 0.7);\n    cursor: pointer;\n    outline: none;\n    font-weight: 800;\n    height: 2.5em;\n    width: 80%\n}\n\n.selectoption {\n    text-align: center;\n}\n\n.selec_addr h6 {\n    margin: 1em;\n    color: RGBA(102, 102, 102, 0.7);\n}\n \n\n\n::v-deep {\n    .el-input__inner {\n        background: white !important;\n        border-color: #DBDBDB;\n        color: #767676;\n    }\n}\n</style>"],"sourceRoot":"src/views/login"}]}