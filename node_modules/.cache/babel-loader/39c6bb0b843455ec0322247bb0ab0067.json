{"remainingRequest":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/src/views/login/index.vue","mtime":1639141214000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/babel.config.js","mtime":1639051781000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/babel-loader/lib/index.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/cache-loader/dist/cjs.js","mtime":1638964486000},{"path":"/Users/fairlyxu/Documents/08-workspace/03-out/denews/baca_app/node_modules/vue-loader/lib/index.js","mtime":1638964568000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9mYWlybHl4dS9Eb2N1bWVudHMvMDgtd29ya3NwYWNlLzAzLW91dC9kZW5ld3MvYmFjYV9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHVzZXJMb2dpbiB9IGZyb20gIkAvYXBpL2xvZ2luLmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4sIGdldFRva2VuIH0gZnJvbSAiQC91dGlscy90b2tlbi5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlL2luZGV4LmpzJzsKaW1wb3J0IHNldHVwIGZyb20gJ0AvdXRpbHMvcG9sa2EuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgYWNjTGlzdDogW10sCiAgICAgIHNlbGVjdGVkOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CgogICAgICAgICAgICAgIGlmICghKGdldFRva2VuKCJiYWNhV2FsbGV0IikgPT0gbnVsbCB8fCBnZXRUb2tlbigiYmFjYVdhbGxldCIpID09ICIiKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIHJldHVybiBzZXR1cCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF90aGlzLmFjY0xpc3QgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBpZiAoX3RoaXMuYWNjTGlzdCA9PSBudWxsIHx8IF90aGlzLmFjY0xpc3QubGVuZ3RoIDwgMSkgewogICAgICAgICAgICAgICAgYWxlcnQoImFjY291bnQgbGlzdCBpcyBudWxsIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gODsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0IHdhbGxldCBmYWlsIiwgX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgxMSk7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDgsIDExLCAxM11dKTsKICAgIH0pKSgpOwogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZUFjYzogZnVuY3Rpb24gc2F2ZUFjYygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgb2JqLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG9iaiA9IF90aGlzMi5hY2NMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYWRkcmVzcyA9PT0gX3RoaXMyLnNlbGVjdGVkOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKG9iaikgewogICAgICAgICAgICAgICAgICBzZXRUb2tlbigidXNlcm5hbWUiLCBvYmoubWV0YS5uYW1lKTsKICAgICAgICAgICAgICAgICAgc2V0VG9rZW4oImFkZHJlc3MiLCBvYmouYWRkcmVzcyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJMb2dpbih7CiAgICAgICAgICAgICAgICAgICJ3YWxsZXRfaWQiOiBvYmouYWRkcmVzcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YSAmJiByZXMuZGF0YS5kYXRhLnRva2VuKSB7CiAgICAgICAgICAgICAgICAgIHNldFRva2VuKCJiYWNhVG9rZW4iLCByZXMuZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgICAgYWxlcnQoImxvZ2luIHNlY2N1c3MiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAgBA,SAAA,SAAA,QAAA,gBAAA;AACA,SAAA,QAAA,EAAA,QAAA,QAAA,kBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AACA,OAAA,KAAA,MAAA,kBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GARA;AASA,EAAA,MATA,oBASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,oBAEA,QAAA,CAAA,YAAA,CAAA,IAAA,IAAA,IAAA,QAAA,CAAA,YAAA,CAAA,IAAA,EAFA;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAGA,KAAA,EAHA;;AAAA;AAGA,cAAA,KAAA,CAAA,OAHA;;AAIA,kBAAA,KAAA,CAAA,OAAA,IAAA,IAAA,IAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,sBAAA,CAAA;AACA;;AANA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUA,cAAA,OAAA,CAAA,GAAA,CAAA,qBAAA;;AAVA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA,GAxBA;AAyBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AAAA,yBAAA,IAAA,CAAA,OAAA,KAAA,MAAA,CAAA,QAAA;AAAA,iBAAA,CADA;;AAEA,oBAAA,GAAA,EAAA;AACA,kBAAA,QAAA,CAAA,UAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,kBAAA,QAAA,CAAA,SAAA,EAAA,GAAA,CAAA,OAAA,CAAA;AACA;;AALA;AAAA,uBAMA,SAAA,CAAA;AAAA,+BAAA,GAAA,CAAA;AAAA,iBAAA,CANA;;AAAA;AAMA,gBAAA,GANA;;AAOA,oBAAA,GAAA,CAAA,IAAA,IAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,kBAAA,QAAA,CAAA,WAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,kBAAA,KAAA,CAAA,eAAA,CAAA;AACA;;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAbA;AAzBA,CAAA","sourcesContent":["<template>\n  <div class=\"login\">\n  \t <div @click=\"doLogin\">登录</div> \n     <select> --请选择-- </select>\n     <option v-for = \"item in accList\" v-bind:value=\"item.address\">\n     {{item.meta.name}}\n     </option>\n     </select>\n     <span>{{selected}}</span>\n\n     <div><button @click = \"saveAcc\" > save </button></div>\n\n  </div>\n</template>\n\n<script>\nimport { userLogin } from \"@/api/login.js\";\nimport { setToken,getToken} from \"@/utils/token.js\";\nimport store from '@/store/index.js'\nimport setup from '@/utils/polka.js'\n\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      isLoading: false,\n      accList: [],\n      selected: ''\n    }\n  },\n  async create() {\n    try{\n      if(getToken(\"bacaWallet\") == null || getToken(\"bacaWallet\") == \"\"){\n      this.accList = await setup()\n      if(this.accList == null || this.accList.length < 1){\n        alert(\"account list is null\")\n      }\n    }\n\n    }catch(error){\n      console.log(\"connect wallet fail\", error)\n    }finally{\n\n    }\n    \n  },\n  methods: {\n    async saveAcc() { \n      let obj = this.accList.find((item) => {return item.address === this.selected });\n      if(obj) {\n        setToken(\"username\", obj.meta.name)\n        setToken(\"address\", obj.address)\n      }\n      let res = await userLogin({\"wallet_id\": obj.address})\n      if(res.data && res.data.data.token){\n        setToken(\"bacaToken\", res.data.data.token)\n        alert(\"login seccuss\")\n      }\n    \n  } \n}\n}\n</script>\n\n<style scoped>\n \n</style>"],"sourceRoot":"src/views/login"}]}